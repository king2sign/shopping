
在线地址:
    http://www.woshipm.com/pd/1055272.html               3个方面解析：电商订单系统设计 _ 人人都是产品经理
    https://cloud.tencent.com/developer/article/1372289  电商系统设计之订单 - 云+社区 - 腾讯云
    https://cloud.tencent.com/developer/article/1340904  电商系统设计之商品 (下) - 云+社区 - 腾讯云
    http://www.sohu.com/a/211471012_468650               电商系统之订单系统
    http://www.sohu.com/a/258275003_701814               订单系统：从0到1设计思路
    https://www.sohu.com/a/221185811_114819              电商后台：实例解读订单系统
    https://www.jianshu.com/p/d1f18987525c               电商产品之订单拆分规则与流程

思想总结1
        A：订单是一个唯一标识，一般按照某种规则特定生成，设计订单号的时候要考虑到订单号生成是一种肉眼是看不出规则的 (防止竞争者或者第三方来估算订单量)
        B：订单号后续用作订单唯一标识用于对接WMS(仓库管理系统)，TMS(物流系统)
        C：订单产生的商品信息，这里除了要记录最终的金额,金额阶段也要记录。比如商品的分摊的优惠券，支付总金额，实付金额等。
           后续的订单结算、退换货、财务等环节都需要使用
        D：订单生产环节存在超时未支付订单有自动取消的过程,这个过程中订单是占用库存数的,只有订单取消后释放
        E：传统电商则是通过关联第三方物流的物流信息进行跟踪。
        F：订单产生前要判断对应的商品是否报缺,如果出现报缺就要考虑怎么处理,换货或换转推(库存，仓促调拨和退款)
           注意：报缺情况分为系统报缺和实物报缺
        G：电商系统要考虑7天无理由退换货的情景，及时订单状态完成后申请退货，此时主要涉及的金额上的计算以及一些财务程序等问题


思想总结2：
        A：订单逆向流程 解释：是指订单被取消了
                取消的情况有几种：
                            1：用户自主取消订单
                            2：风控系统触发订单
                            3：客服接到客诉仲裁后出发取消订单
                            4：超时未支付取消订单
                            5：换货报缺转为退单(取消订单)

                关注：
                     1：订单状态(在某一个订单产生后设置了某一个状态节点之后订单无法取消)
                     2：当退单被商家拒绝后需要转入客服仲裁
                     3：部分退的订单一般保持享用状态,但金额按照分摊的金额退款


思想总结3：
        A：细想下设计订单的状态和存在的价值去分析和理解他背后设计机制

        B：正向和逆向流程状态
                正向订单：    已锁定、已确认、已付款、已发货、已结算、已完成、已取消等
                正向预售订单：预付款已付未确认、已确认未付尾款（变更）
                正向问题单：  未确认、未锁定、未发货、部分付款、未付款等
                逆向退单：    待结算、未收到货、未入库、质检不通过、部分收货、已取消、客户已收货等
                逆向换单：    完成、已结算、客服已收货等

        C：服务对象维度
                客户操作的状态：待付款、待发货、待收货、待评价、买家已付款、交易成功/失败、卖家已发货、退款成功、交易关闭、

                卖家操作的状态：已锁定、已确认、已分仓、已分配、已出库、已收货、已完成等、等待买家付款、待付款和待发货订单、退款中的订单、定金已付、买家已付款、
                               卖家已发货、交易成功、交易失败、异常订单

        D：订单告知：
                当状态发生变化时,某些变化后的状态是要推送给商家或卖家的
                    告知的对象：用户、商家、物流人员
                    告知的方式：push、短信、微信、支付宝
                    推送的节点：某些状态的改变后就告知

 思想总结4：
        需求思想设计
                A：实现购买流程
                        1：实现订单的创建、发货、确认信息闭环
                        2：支持订单审核（初期可支持人工审核即可）
                        3：支持用户端显示订单相关信息
                        4：支持促销金额计算

                B：提供服务
                        1：提供订单分布式服务
                        2：支持跨平台交易单生产(即同一个大交易单内既有商家商品又有自营商品或者是多个商家的商品）
                        3：支持拆单、合并逻辑(配送单、支付单等)
                        4：提供更丰富的订单推送服务，完善订单状态

                C：支持不同营销手段下的订单类型
                        1：平台发展到足够大的规模，提效、稳定变成一个重要的话题。可以提供不同营销场景下的订单，如：团购、预购等。



 //======================3个方面解析：电商订单系统设计==============================
大致方面：订单字段、订单流程、订单推送

前奏1：电商所有模块中,订单系统作为最核心的模块,决定了某件商品的买卖流程是否能顺畅执行.起着承上启下的作用。
前奏2：很多日常开发和测试提的需求都是表面需求，而这些表面上呈现出现的各种问题，都是源自于流程上的不完整或者
       流程上某个环节的缺失导致，订单系统作为一个承上启下的模块,各个流程上出了问题,订单是逃不掉的
前奏3：为什么说订单系统是承上启下的作用，上游是什么、下游又是什么

提示：只有订单信息完善的形成后，方便与仓库拣货、包装

思想考虑1：设计订单系统需要考虑要用到那几个板块的信息，只有所有的模块都考虑清晰,才能保证订单系统的稳定性和好扩展性

           提示：一共分为5大类 商品信息、用户信息、金额信息、时间信息、订单信息
           商品信息：
                描述：商品信息属于订单系统的上游端、所有订单都是从商品演变而来、从商品到订单，订单系统必须要搜集相关的
                      商品信息。获取到的商品信息将在订单详情页面中展示
                信息内容：店铺信息、商品id、商品价格、商品规格、商品数量、商品价格、
                注意：商品金额不单单是一个商品价格所以会拿到一个独立的板块描述


           用户信息：
                描述：就是购买的人一些信息，有些平台的用户成长提醒是基于用户对平台的活跃度来计算的，列如会有会员等级及积分卡等类似的成长标识
                信息内容：用户的ID、收货人、收货地址、联系方式等
                注意：除了获取用户普通信息外，还需要获取该用户的等级，该次购买后所获得的积分，以及该用户所在等级能在该订单上扣除的优惠等信息
                目前想法：就是一些用户信息信息,目前不支持用户等级制对应的一些信息功能


           金额信息：
                描述：订单所涉及的金额信息有一定的特殊性，所以独立出来讲，理论上金额信息应归属于商品信息，但是这个金额信息有很多种。
                信息内容：商品金额、优惠金额、支付金额、
                注意：而优惠金中涉及到的信息较复杂，像有自营和第三方入驻的电商平台，后会有商家优惠和跨店优惠而这些优惠又分不同类型，
                      例如现金扣减，消费券扣减，积分获取，礼品卡扣减，或者以上几种的组合使用。
                目前想法：只有商家自己的优惠券,没有官方优惠劵


           时间信息：
              描述：记录各个卡点下的时间，一是记录、而是方便售后验证和客户分析。
              提示：订单时间是根据订单状态改变而改变的
              信息内容：
                    下单未付款：       订单创建时间、下单时间；
                    待发货状态：       订单创建时间、下单时间、支付时间；
                    待收货状态：       订单创建时间、下单时间、支付时间、发货时间；
                    交易完成状态：     订单创建时间、下单时间、下单时间、支付时间、发货时间、完成时间；
                    待退款状态：       退款订单创建时间、申请退款时间；
                    交易关闭-用户取消：订单创建时间、下单时间、用户取消时间；
                    交易关闭-仅退款：  订单创建时间、下单时间、支付时间、退款申请时间、退款成功时间；
                    交易关闭-退货退款（包含部分仅退款）：订单创建时间、下单时间、支付时间、交易完成时间、退款申请时间、退款时间。

              注意：时间信息看起来不重要，其实是订单系统一个重要的组成部分，原因大家可以思考一下。
              目前想法：这里描述的订单状态是不怎么完善的到时候会单独研究下订单系统的状态


           订单信息：
              描述：订单信息在订单系统最为核心，订单信息最重要的又是订单状态、对应一个付款方式
              信息内容：【待付款】、【待发货】、【待收货】、【待评价】、【交易完成】、【用户取消】、【仅退款】、【退货退款】
              目前想法：这里描述的订单状态是不怎么完善的到时候会单独研究下订单系统的状态
                       付款方式:目前只支持微信和支付宝付款


思想考虑2：订单流程 订单流程是指从订单产生到完成整个流程的过程，其中包括正向流程和逆向流程
     提示：
        正向流程
            描述：就是一个正常的网购步骤：订单生产--->支付订单--->卖家发货---->确认收货--->交易完成

            订单生成：用户下单后，系统需要生成订单，生成期间就要涉及订单字段信息
                     注意：订单生产后就要考虑到销售库存数量的操作，库存的扣减分为两种、
                           A：一种是下单减库存
                           B：另一种是付款减库存

                      目前想法：就是只有用户真正的付款了才减去对应的SKU库存数

            支付订单：用户支付完订单后，需要获取订单的支付信息，包括支付流水号、支付时间等
                      注意:支付完订单接着就是等商家发货，但在发货过程中，往往还有一种情况存在，很正常却也比较复杂，就是订单拆单。
                           拆单分为两种
                                A(目前不考虑)：是用户挑选的商品来自于不同渠道（自营与商家，商家与商家），此时就需要拆分订单，并分开结算，这里还涉及父子订单的说法，这里不再赘述。

                                B：另一种是在SKU层面上拆分订单：不同仓库，不同运输要求的SKU，包裹重量体积限制等因素都需要将订单拆分。
                                       描述：户提交的订单在物理上并不是一个不可拆分的单元，也即：它不是一个颗粒度最小的实体，可以进行多种形式的分解，具体如何分解根据不同的业务场景，
                                       拆分订单的原因：仓库原因、 店铺原因、跨境商品原因、 物流原因、商品品类
                                                       店铺原因：
                                                               一些电商平台（天猫、淘宝、拼多多等），有很多入驻的商家，用户的订单跨店铺结算的情况非常普遍，
                                                               那么这时候也需要对订单进行拆分，本质上这种情况和仓库有类似之处，每个入驻的商家可以看做一个仓库。

                                                       物流原因：
                                                               不同物流公司对单个包裹的重量或体积都有特殊要求，例如有些物流公司（邮政小包）规定单个包裹不能超过20kg，并且还存在一种情况：
                                                               一个10kg的包裹有可能比两个5kg的包裹收费更高，基于物流成本考虑一般也会将一个订单拆分成两个，例如申通：10罐啤酒寄到辽宁价格为24，
                                                               同样地点5瓶的价格是6块（与申通的签约价格不是市场价）。

                                                      其余到：电商产品之订单拆分规则与流程 - 简书.html页面进行查看

                                       什么时候拆单
         逆向流程
            描述：就是各种的退款流程













